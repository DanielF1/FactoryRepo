<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>Weinlager</title>

		<!-- JS dependencies -->
	<script type="text/javascript" src="//code.jquery.com/jquery-latest.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="../resources/js/bootstrap.min.js"></script>
	<script src="../resources/js/docs.min.js"></script>
	
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
     	google.load("visualization", "1", {packages:["corechart"]});
		google.setOnLoadCallback(drawVisualization);

		function drawVisualization() {
	    	
// 	    	var table = document.getElementById("dataTable"); 
// 	    	var rows = table.getElementsByTagName("tr");
// 	    	var cells = table.getElementsByTagName("td"); 

	    	var values = [];
	    	$('#dataTable tbody tr').each(function () {
	    	    values.push($('td:first', this).text());
	    	});

	    	
	    	console.log(values);
		  // Some raw data (not necessarily accurate)
		  var data = google.visualization.arrayToDataTable([[values]]);

		  var options = {
		    title : 'Monthly Coffee Production by Country',
		    vAxis: {title: "Cups"},
		    hAxis: {title: "Month"},
		    seriesType: "bars",
		    series: {1: {type: "line"}}
		  };

		  var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
		  chart.draw(data, options);
		}
	</script>
	
	
	<!-- CSS dependencies -->
	<link href="../resources/css/style.css" rel="stylesheet" />
	<style type="text/css">
	  .success_table{background-color:#92D36E!important; color:#fff;}
	  .btn-default{background-color:#92D36E!important; color:#fff;}
	  .wine_amount{width:170px; margin-right:10px; margin-left:10px;}
	  .diagramm{left:-120px;}
	  .location_name{}
 	  td{ 
 		    max-width: 100px; 
 		    overflow: hidden;
 		    text-overflow: ellipsis; 
 		    white-space: nowrap; 
 		}
	  .table_max{overflow: auto;}
	</style>

	<img src="../resources/img/wein.jpg" class="header"/>
</head>

<body>
	<div class="main-wrapper">
		<!-- Header -->
	
		<div class="col-lg-7"></div>
	
		<!-- Log in / Log out navigation -->
		<div class="col-lg-5 logNavi">	
			<nav th:include="login :: login"></nav>
		</div>
		<!-- Log in / Log out navigation -->
	
		<div class="col-lg-2"></div>
	
		<!-- navigation -->
		<div class="col-lg-8 navigation">
		<nav th:include="navigation :: navigation"></nav>
		</div>
		<!-- /navigation -->
	
		<div class="col-lg-2"></div>
	
		<div class="header">
			<div class="header-title">Cognac Fabrik <br/>Feuerwasser</div>
		</div>
		<!-- /Header -->
	
		<!-- Container -->
		<div class="main-container content">
			<div class="col-lg-12">
				<h3 class="pull-left">Weinlager</h3>
				<div class="pull-right">
					<form th:method="post" th:action="@{/wineTransport}">	
						<select name="location_start">
							<option selected="disabled" style='display:none;'>Start</option>
							<option th:each="production : ${production_management}" th:value="${production.location_name}">
								<span th:text="${production.location_name}"></span>
							</option>
						</select>
						
						<select name="location_goal">
							<option value="" selected="disabled" style='display:none;'>Ziel</option>
							<option  th:each="production : ${production_management}" th:value="${production.location_name}">
								<span th:text="${production.location_name}"></span>
							</option>
						</select>
						
						<input class="text-center wine_amount" type="number" name="wine_amount" min="1" placeholder="Weinmenge in Liter"/>
						<button class="btn btn-default">Weintransport beantragen</button>
					</form>
				</div>
				
				
				<div class="col-lg-12"  th:each="production, it : ${production_management}" th:with="loc_count = ${it.count}">
					<div>
						<h4><span th:id="loc_ + ${loc_count} + _name_ + ${index}" th:text="${production.location_name}"></span></h4>
					</div>

					<div class="table_max">
						<table class="table table-condensed dataTable" id="dataTable">
							<tr class="success_table">
								<td class="text-center">Datum</td>
								<td class="text-center" th:each="day : ${production.production_a_day}"><span th:id="loc_ + ${loc_count} + _name_ + ${index}" th:text="${day.date}"></span></td>
							</tr>
							<tr>
								<td class="text-center">Verarbeitung</td>
								<td class="text-center" th:each="day : ${production.production_a_day}"><span th:id="loc_ + ${loc_count} + _processing_ + ${index}" th:text="${day.wine_amount_for_production}"></span></td>
							</tr>	
							<tr style="background-color:#F2F2F2">
								<td class="text-center">Weinlieferung</td>
								<td class="text-center" th:each="day : ${production.production_a_day}"><span th:id="loc_ + ${loc_count} + _delivery_ + ${index}" th:text="${day.wine_delivery_at_that_day}"></span></td>
							</tr>	
							<tr class="">
								<td class="text-center">Wein Inport</td>
								<td class="text-center" th:each="day, it : ${production.production_a_day}" th:with="index = ${it.count}"><span th:id="loc_ + ${loc_count} + _transport_ + ${index}" th:text="${day.wine_transport_at_that_day_in}"></span></td>
							</tr>
							<tr class="" style="background-color:#F2F2F2">
								<td class="text-center">Wein Export</td>
								<td class="text-center" th:each="day, it : ${production.production_a_day}" th:with="index = ${it.count}"><span th:id="loc_ + ${loc_count} + _transport_ + ${index}" th:text="${day.wine_transport_at_that_day_out}"></span></td>
							</tr>
						</table>
					</div>
					
					<div id="chart_div" style="width: 900px; height: 500px;"></div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Container -->
</body>
</html>